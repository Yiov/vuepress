import{_ as l,r as c,o as d,c as u,b as s,d as n,a as e,w as p,e as t}from"./app-86b6e97a.js";const v="/vuepress/assets/vuepress-41-2cf40f08.png",m="/vuepress/assets/vuepress-42-4ef57bf9.png",g="/vuepress/assets/vuepress-43-0f7c88c1.png",r="/vuepress/assets/vuepress-54-700cd7e6.png",_="/vuepress/assets/vuepress-45-39246a59.png",h="/vuepress/assets/vuepress-46-28066ba8.png",k="/vuepress/assets/vuepress-47-54d38559.png",b="/vuepress/assets/vuepress-48-ec11f391.png",f="/vuepress/assets/vuepress-49-e3b78c25.png",y="/vuepress/assets/vuepress-50-ca5234e1.png",x="/vuepress/assets/vuepress-51-cbadbbb3.png",A="/vuepress/assets/vuepress-52-d435f0e5.png",I="/vuepress/assets/vuepress-53-933747aa.png",w="/vuepress/assets/vuepress-55-72bf487c.png",D="/vuepress/assets/vuepress-56-9255f098.png",P="/vuepress/assets/vuepress-57-a1d5b640.png",E="/vuepress/assets/vuepress-58-20c99766.png",C="/vuepress/assets/vuepress-59-bb22acdf.png",j="/vuepress/assets/vuepress-60-5fc0097c.png",N="/vuepress/assets/vuepress-61-efe9f320.png",X="/vuepress/assets/vuepress-62-8d166611.png",S="/vuepress/assets/vuepress-63-2242a716.png",q="/vuepress/assets/vuepress-64-cac3f0f8.png",B="/vuepress/assets/vuepress-65-92ea40c7.png",G="/vuepress/assets/vuepress-66-64c903f7.png",O="/vuepress/assets/vuepress-67-9b384dee.png",K="/vuepress/assets/vuepress-68-81121059.png",F="/vuepress/assets/vuepress-69-653be6d1.png",T="/vuepress/assets/vuepress-70-3afd7da9.png",V="/vuepress/assets/vuepress-71-0abb0f33.png",L="/vuepress/assets/vuepress-72-23034cc2.png",M="/vuepress/assets/vuepress-73-f224bcf8.png",R="/vuepress/assets/vuepress-74-575d7bb5.png",U={},Y=t('<h1 id="插件" tabindex="-1"><a class="header-anchor" href="#插件" aria-hidden="true">#</a> 插件</h1><div class="custom-container warning"><p class="custom-container-title">更新时间</p><p>最近更新：2023-5-14</p><p>搭建版本：v2.0-beta.61</p></div><h3 id="谷歌分析" tabindex="-1"><a class="header-anchor" href="#谷歌分析" aria-hidden="true">#</a> 谷歌分析</h3>',3),$={href:"https://analytics.google.com/",target:"_blank",rel:"noopener noreferrer"},z=s("p",null,"安装，不要把npm改成其他",-1),H=s("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[s("pre",{class:"language-bash"},[s("code",null,[s("span",{class:"token function"},"pnpm"),n(" i "),s("span",{class:"token parameter variable"},"-D"),n(` @vuepress/plugin-google-analytics@next
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),J=s("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[s("pre",{class:"language-bash"},[s("code",null,[s("span",{class:"token function"},"npm"),n(" i "),s("span",{class:"token parameter variable"},"-D"),n(` @vuepress/plugin-google-analytics@next
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),Q=t(`<div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> googleAnalyticsPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@vuepress/plugin-google-analytics&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">googleAnalyticsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      id<span class="token operator">:</span> <span class="token string">&#39;G-XXXXXXXXXX&#39;</span><span class="token punctuation">,</span> <span class="token comment">//跟踪ID</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),W={href:"https://analytics.google.com/",target:"_blank",rel:"noopener noreferrer"},Z=t('<p>点 <code>开始衡量</code></p><div class="custom-container tip"><p class="custom-container-title">说明</p><p>没有账号的注册账号，要翻墙哦</p></div><p><img src="'+v+'" alt=""></p><p>信息随便填，后面都可以改</p><p><img src="'+m+'" alt=""></p><p>创建完成，点网站，输入你自己的网站</p><p><img src="'+g+'" alt=""></p><p><img src="'+r+'" alt=""></p><p>衡量ID就是跟踪ID，我们填入 <code>config.ts</code></p><p><img src="'+_+'" alt=""></p><p>如果不想要了，在账户设置里删除账户</p><div class="custom-container tip"><p class="custom-container-title">说明</p><p>删除了在回收站里，要35天后永久删除</p></div><p><img src="'+h+'" alt=""></p><h2 id="docsearch" tabindex="-1"><a class="header-anchor" href="#docsearch" aria-hidden="true">#</a> DocSearch</h2><p>先安装 <code>docsearch</code> 插件</p><div class="custom-container tip"><p class="custom-container-title">说明</p><p>安装失败，挂个梯子就可以了</p></div>',16),ss=s("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[s("pre",{class:"language-bash"},[s("code",null,[s("span",{class:"token comment"},"#这里是pnpm 新增@algolia/client-search"),n(`
`),s("span",{class:"token function"},"pnpm"),n(" i "),s("span",{class:"token parameter variable"},"-D"),n(` @vuepress/plugin-docsearch@next @algolia/client-search
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),ns=s("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[s("pre",{class:"language-bash"},[s("code",null,[s("span",{class:"token comment"},"#这里就是npm，是yarn也不要自己改"),n(`
`),s("span",{class:"token function"},"npm"),n(" i "),s("span",{class:"token parameter variable"},"-D"),n(` @vuepress/plugin-docsearch@next
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),es=t('<p><img src="'+k+`" alt=""></p><p>然后再ts里添加配置</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> docsearchPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@vuepress/plugin-docsearch&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">//========docsearch配置========//</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">docsearchPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      appId<span class="token operator">:</span> <span class="token string">&#39;&lt;APP_ID/Application ID&gt;&#39;</span><span class="token punctuation">,</span>
      apiKey<span class="token operator">:</span> <span class="token string">&#39;&lt;API_KEY/Search-Only API Key&gt;&#39;</span><span class="token punctuation">,</span>
      indexName<span class="token operator">:</span> <span class="token string">&#39;&lt;INDEX_NAME&gt;&#39;</span><span class="token punctuation">,</span>
      locales<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&#39;/&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          placeholder<span class="token operator">:</span> <span class="token string">&#39;搜索文档&#39;</span><span class="token punctuation">,</span>
          translations<span class="token operator">:</span> <span class="token punctuation">{</span>
            button<span class="token operator">:</span> <span class="token punctuation">{</span>
              buttonText<span class="token operator">:</span> <span class="token string">&#39;搜索文档&#39;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string-property property">&#39;/en/&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          placeholder<span class="token operator">:</span> <span class="token string">&#39;Search Documentation&#39;</span><span class="token punctuation">,</span>
          translations<span class="token operator">:</span> <span class="token punctuation">{</span>
            button<span class="token operator">:</span> <span class="token punctuation">{</span>
              buttonText<span class="token operator">:</span> <span class="token string">&#39;Search Documentation&#39;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>输出：</p><p><img src="`+b+'" alt=""></p><p>DocSearch有2种模式，<code>免费申请</code> 和 <code>自行搭建</code></p><div class="custom-container tip"><p class="custom-container-title">区别</p><p>免费申请：可使用algolia官方的爬虫，但是需要提交公开仓库代码链接</p><p>自行搭建：需自行搭建爬虫，不需要提交仓库代码链接</p></div><h3 id="免费申请" tabindex="-1"><a class="header-anchor" href="#免费申请" aria-hidden="true">#</a> 免费申请</h3>',8),as={href:"https://docsearch.algolia.com/",target:"_blank",rel:"noopener noreferrer"},ts=t('<p>点 <code>Apply</code> 申请，填入你的网址/邮箱/仓库链接即可</p><p><img src="'+f+'" alt=""></p><p><img src="'+y+'" alt=""></p><div class="custom-container tip"><p class="custom-container-title">说明</p><p>我点了2次都没有跳转，最后挂了个梯子可以了</p></div><p><img src="'+x+'" alt=""></p><p>等待6-7小时，邮件发送过来</p><p>没有注册过的会给我们一个邀请链接，打开并注册账号</p><div class="custom-container warning"><p class="custom-container-title">另外</p><p>这里的appid、apikey和indexname我们可以填入<code>config.ts</code></p></div><p><img src="'+A+'" alt=""></p>',9),ps={href:"https://www.algolia.com/",target:"_blank",rel:"noopener noreferrer"},os=s("code",null,"Search",-1),cs=s("code",null,"index",-1),is=t('<p>由于官方已经帮我们创建了 <code>Application</code> ，我们直接点接受即可</p><p><img src="'+I+'" alt=""></p><p><img src="'+r+'" alt=""></p><p>问题发现了，这里的 <code>records</code> 值为0，没有数据，爬取数据有问题</p><div class="custom-container tip"><p class="custom-container-title">说明</p><p>点刷新看看，我点了也没有用</p></div><p><img src="'+w+'" alt=""></p>',6),rs={href:"https://crawler.algolia.com/",target:"_blank",rel:"noopener noreferrer"},ls=t('<p>再点击官方帮我们申请的Application</p><p><img src="'+D+'" alt=""></p><p>点 <code>Overview</code> 进来后发现爬虫数据有的，但是Records没有值，说明数据逻辑有问题</p><p><img src="'+P+'" alt=""></p><p>点 <code>Editor</code> 进来发现了问题，这里多了一个 <code>/doc</code></p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>这里只要确保你的网址都是对的，其他都不要改</p><p>特别是apikey不要改！和你申请的apikey不是同一个用途</p></div><p><img src="'+E+'" alt=""></p><p>改过之后点 <code>Runtest</code> 测试一下，records有值就是没问题了</p><p>点保存，再重新在Overview爬取即可</p>',9),ds={class:"custom-container tip"},us=s("p",{class:"custom-container-title"},"说明",-1),vs={href:"https://v2.vuepress.vuejs.org/zh/reference/plugin/docsearch.html#%E8%8E%B7%E5%8F%96%E6%90%9C%E7%B4%A2%E7%B4%A2%E5%BC%95",target:"_blank",rel:"noopener noreferrer"},ms=s("p",null,"免费的东西自然是问题多",-1),gs=s("p",null,[s("img",{src:C,alt:""})],-1),_s=s("h3",{id:"自行搭建",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#自行搭建","aria-hidden":"true"},"#"),n(" 自行搭建")],-1),hs=s("p",null,"步骤有点繁琐，有点耐心看，我都一步步截图了",-1),ks={href:"https://www.algolia.com/",target:"_blank",rel:"noopener noreferrer"},bs=t('<div class="custom-container tip"><p class="custom-container-title">说明</p><p>也可以只用github关联登录注册</p></div><p><img src="'+j+'" alt=""></p><p>注册好后，我们在设置里新建一个Application</p><div class="custom-container tip"><p class="custom-container-title">说明</p><p>系统会默认给我们建一个，也是可以用的</p></div><p><img src="'+N+'" alt=""></p><p>创建一个新的应用程序 Applications - Create Application</p><p><img src="'+X+'" alt=""></p><p><img src="'+S+'" alt=""></p><p>名称随便，选择 <code>Free</code> 免费的方案，下一步</p><div class="custom-container tip"><p class="custom-container-title">说明</p><p>爬虫每月1万次，足够用了</p></div><p><img src="'+q+'" alt=""></p><p>这里只能选择默认了，香港这些数据中心都不能选择</p><p><img src="'+B+'" alt=""></p><p>勾选同意，创建即可</p><p><img src="'+G+'" alt=""></p><p>这样就完成了</p><p><img src="'+O+'" alt=""></p><p>创建索引，右下角选择 Date Sources - Indices - Create Index</p><p><img src="'+K+'" alt=""></p><p><img src="'+F+'" alt=""></p><p>接下来就是准备好我们的API，上面选择创建的Application</p><p>选择 <code>API keys</code></p><div class="custom-container tip"><p class="custom-container-title">说明</p><p>Application ID：应用ID</p><p>Search-Only API Key：搜索API</p><p>Admin API Key：管理API</p></div><p><img src="'+T+'" alt=""></p><p><img src="'+V+'" alt=""></p><p>最后就是爬取索引了，二选一</p>',26),fs={class:"custom-container details"},ys=s("summary",null,"Docker爬取索引",-1),xs={href:"https://yiov.github.io/website/VMware",target:"_blank",rel:"noopener noreferrer"},As={href:"https://yiov.github.io/website/docker",target:"_blank",rel:"noopener noreferrer"},Is={href:"https://yiov.github.io/website/BT",target:"_blank",rel:"noopener noreferrer"},ws=s("code",null,"root",-1),Ds=t('<p>新建一个 <code>docsearch</code> 目录</p><div class="custom-container tip"><p class="custom-container-title">说明</p><p>名字随便，只要自己记得住就行</p></div><p><img src="'+L+`" alt=""></p><p>新建一个 <code>.env</code> 环境变量文件，并填入相应值</p><div class="language-env line-numbers-mode" data-ext="env"><pre class="language-env"><code>APPLICATION_ID=你的Application ID
API_KEY=你的Admin API Key不是search
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+M+'" alt=""></p>',6),Ps={href:"https://repology.org/project/jq/versions",target:"_blank",rel:"noopener noreferrer"},Es=t(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum <span class="token function">install</span> jq <span class="token parameter variable">-y</span>

<span class="token comment">#版本查询</span>
jq <span class="token parameter variable">--version</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+R+`" alt=""></p><p>在宝塔docsearch目录里新建 <code>config.json</code> 文件，用于爬虫的配置，根据提示修改好自己的链接</p><div class="custom-container warning"><p class="custom-container-title">注意</p><p><code>recordProps</code> 是用于默认主题的配置，你可以根据你使用的主题来修改</p><p><code>initialIndexSettings.YOUR_INDEX_NAME.attributesForFaceting</code> 字段必须包含 <code>lang</code>，否则该插件将无法正常工作</p></div><p>只需要修改 <code>startUrls</code> 和 <code>index_name</code> 其余选项可保持默认</p><div class="custom-container tip"><p class="custom-container-title">说明</p><p>startUrls就是你的网站地址</p></div><p>拉取镜像并运行爬虫</p><div class="custom-container tip"><p class="custom-container-title">说明</p><p>这里的 <code>env</code> 和 <code>cat</code> 两个路径，根据自己的改文件路径</p><p>格式：<code>docker run -it --env-file=你的env路径 -e &quot;CONFIG=$(cat 你的配置json路径 | jq -r tostring)&quot; algolia/docsearch-scraper</code></p></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-it</span> --env-file<span class="token operator">=</span>/root/docsearch/.env <span class="token parameter variable">-e</span> <span class="token string">&quot;CONFIG=<span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> /root/docsearch/config.json <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> tostring<span class="token variable">)</span></span>&quot;</span> algolia/docsearch-scraper
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,9),Cs=s("details",{class:"custom-container details"},[s("summary",null,"Github Actions爬取索引")],-1);function js(Ns,Xs){const a=c("ExternalLinkIcon"),o=c("CodeGroupItem"),i=c("CodeGroup");return d(),u("div",null,[Y,s("p",null,[n("利用插件 "),s("a",$,[n("google-analytics"),e(a)]),n(" ，来查看网站访问量")]),z,e(i,null,{default:p(()=>[e(o,{title:"pnpm"},{default:p(()=>[H]),_:1}),e(o,{title:"yarn"},{default:p(()=>[J]),_:1})]),_:1}),Q,s("p",null,[n("谷歌分析官网："),s("a",W,[n("https://analytics.google.com/"),e(a)])]),Z,e(i,null,{default:p(()=>[e(o,{title:"pnpm"},{default:p(()=>[ss]),_:1}),e(o,{title:"yarn"},{default:p(()=>[ns]),_:1})]),_:1}),es,s("p",null,[n("DocSearch官网："),s("a",as,[n("https://docsearch.algolia.com/"),e(a)])]),ts,s("p",null,[n("但是我们还是无法搜索，进入"),s("a",ps,[n("Algolia官网"),e(a)]),n("，点 "),os,n(" - "),cs]),is,s("p",null,[n("登录官方爬虫后台进行调试："),s("a",rs,[n("https://crawler.algolia.com/"),e(a)])]),ls,s("div",ds,[us,s("p",null,[n("如果还是不行，就对照 "),s("a",vs,[n("vuepress文档"),e(a)]),n(" 挨个试")]),ms]),gs,_s,hs,s("p",null,[s("a",ks,[n("Algolia官网"),e(a)]),n(" 注册并登录账号")]),bs,s("details",fs,[ys,s("p",null,[n("我用了 "),s("a",xs,[n("虚拟机"),e(a)]),n(" 安装了 "),s("a",As,[n("docker"),e(a)]),n("，进 "),s("a",Is,[n("宝塔"),e(a)]),n(" 根目录 "),ws,n("文件夹")]),Ds,s("p",null,[n("安装 "),s("a",Ps,[n("jq"),e(a)]),n(" 一款json解析工具")]),Es]),Cs])}const qs=l(U,[["render",js],["__file","plugin.html.vue"]]);export{qs as default};
